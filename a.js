!function(){function e(e,n){g.M=e.M,g.N=e.N,g.O=e.O,g.P=e.P,n&&t()}function t(){var e=g.M,t=g.N,n=g.O,i=g.P;g.M=i,g.N=n,g.O=t,g.P=e}function n(e){return P&z[e]}function i(e){var t=ye[e];return!!t}function o(e){var t=ye[e];return ye=Ae[t],{name:ye.code||t,data:ye}}function r(e,t,n,i){var o={code:i+n.toString(16),value:n},r=i+(e-1)+""+t,a=i+e+""+(t-1);return 0!=e&&8&n&&2&Ae[r].value&&(o.l=r,Ae[r].r=i+e+""+t),0!=t&&1&n&&4&Ae[a].value&&(o.u=a,Ae[a].d=i+e+""+t),o}function a(e,t){console.log("going to generate rooms");for(var n=Ae[e],i=Ae[e+"Z"],o=0;4>o;o++)for(var a=0;4>a;a++){var f=parseInt(t[4*o+a+2],16),c=r(a,o,f,e);0==a&&0==o&&(c.l=n.code,n.r=e+a+""+o),3==a&&3==o&&(c.r=i.code,i.l=e+a+""+o),Ae[e+a+""+o]=c}}function f(e){Ne=e}function c(){Oe>=De||setTimeout(function(){t(),Oe++,c()},Ie)}function l(e,t){Oe=0,De=e||De,Ie=t||Ie,c()}function d(){if(!Ne.isReady())return ra(d);var e=Ne.readInputs();Ne.update(e),u.fillStyle=g.P,Ne.draw(),we.draw(Pe.coords.x*m,Pe.coords.y*m),u.fillStyle="#333",u.fillRect(0,64*m,900,64*m),u.fillRect(64*m,0,900-64*m,500),ra(d)}var p=document;p.get=p.getElementById;for(var s=p.get("c"),u=s.getContext("2d"),m=7,h=64,v={gboy:{M:"#0E3A19",N:"#32623D",O:"#6D9F6B",P:"#96BA39"},gboy2:{M:"#0E1D24",N:"#2B6752",O:"#81BF76",P:"#DDF8D1"},gboy3:{M:"#000000",N:"#525252",O:"#929292",P:"#FFFFFF"},exp1:{M:"#A4155D",N:"#525252",O:"#F14D9F",P:"#E2FFE2"},exp2:{M:"#F21E12",N:"#890902",O:"#1C492D",P:"#000000"}},g=v[Object.keys(v)[Math.floor(5*Math.random())]],k=-1,A=15,y=2,w=0,x=["ms","moz","webkit","o"],M=0;M<x.length&&!window.requestAnimationFrame;++M)requestAnimationFrame=window[x[M]+"RequestAnimationFrame"];requestAnimationFrame||(requestAnimationFrame=function(e){var t=(new Date).getTime(),n=Math.max(0,16-(t-w)),i=setTimeout(function(){e(t+n)},n);return w=t+n,i}),ra=requestAnimationFrame;var P=0,z={37:1,38:2,39:4,40:8,65:16,83:32,68:64,32:128,13:256,49:512,50:1024,51:2048,52:4096,53:8192,54:16384,55:32768,56:65536,57:131072};p.addEventListener("keydown",function(e){var t=e.keyCode||e.which;z[t]&&(P|=z[t],e.preventDefault())}),p.addEventListener("keyup",function(e){var t=e.keyCode?e.keyCode:e.which;P&z[t]&&(P^=z[t],e.preventDefault())});var N="{'{({){*{7{9{:{G{H{I{J{g{h{i{j{k!\"#$%&1234ABCDQRSTabcdqrst~+~.~;~>~K~N~[~^~k~n",b="{[",Y="{L{M{W{X{Y{Z{\\",O="{8",D="{%{&{'{({5{7{8{E{F{G{H{e{f{g{h{u{v!\"/012@ABCPQRS`abcpqrs~*~.~:~>~K~L~N~_~o",I="{I{J{U{V{W{X{Y",R="{j",C="{'{({){*{7{9{:{G{H{I{J{g{h{i{j!\"#$1234ABCDQRSTabcdqrst~+~.~;~>~K~N~[~^~k~n",F="{K{L{W{X{Y{Z{[",L="{l",S="{'{){*{7{8{9{:{G{H{I{J{g{h{i{j!\"#$1234ABCDQRSTabcdqrst~+~.~;~>~L~N~\\~^~n",Z="{W{X{Y{Z{\\{l&",J="{(",H="{'{({){*{7{9{:{G{H{I{J{g{h{i{j!\"#$1234ABCDQRSTabcdqrst~*~-~:~=~K~N~^",_="{W{X{Y{Z{\\{]{m",B="",X="{'{({){*{7{8{9{:{G{I{J{g{h{i{j!\"#$1234ABCDQRSTabcdqrst~+~-~;~=~K~[~k",G="{<{L{W{X{Y{Z{\\",K="{H",q='{7{8{9{:{G{H{I{J{W{Y{Z!"#$1234ABCDQRSTabcdqrst~+~,~-~.~;~=~K~N~\\~^~l',T="{k",E="{]{g{h{i{j{l{m",Q="{X",W='"#1234@ADEPRUadrs',$="BSTb",V="CQc",U="{'{({){*{7{9{:{G{H{I{J{g{h{i{j!\"#$1234ABCDQRSTabcdqrst~*~.~:~>~J~N~[~_~o",ee="{&{'{({7{8{9{F{G{H{I{J{X{Y{Z{[{i{j{k!\"#$%&0456@DEFTUVWcgs~!~-~1~=~A~N~R~^~b~n~r",te="{6",ne="~J~K~L~M~N~Y~Z~\\~]~^~_~`~a~b~h~i~j~k~l~m~n~o~p~q~r~s~t",ie="~[",oe=["","~o~j~_~Z~J{8~n~k~^~[~K{9","~p~i~`~O~?~/~-~,ueUFE65{v{[{Z{Y{X{K{;{9~o~j~_~N~>~+qaQA1{k{j{i{h{g{I{G{7{*{){({'","~K~<~0vfXVH8'{u{\\{L{<~J~;~,rbRB2{X{H{8","~n~k~^~[~N~>~;~+rqbaRQBA21{k{j{i{h{g{I{H{G{7{*{){({'~p~i~`~Z~O~?~<~0~/~-vufeXVUHFE865'{v{u{\\{[{Z{Y{L{K{<{;","{l{[","{m{l","{[{m","{n{m{k{j{i{h{_{\\{Z{Y{X{W{M{L","{p{o{l{m{h{_","{\\{Z{Y{X{W{M{L{p{o{n{l{k{j{i","{9{8","{I{9","{8{I","~p~O~;~9~8~(o_O?{D{6{4{$~o~N~L~K~*C{H{8{5{(","~N~H~=~7~-~'nN>.{t{d{C{5{3{#~O~>~;~:~9~8~.~(scSRB2\"{h{G{7{4{'","~`~W~G~p~H","~g~P~O~8~(RB~`~_~7~'nN>","~i~X~M~H~<~9~,~)2\"{G{7{4{'~g~W~P~G~=~8~-~(.{t{C{5{3{#","~k~Z~J~=~:~-~*scSC3{h{H{8{5{(~i~X~M~H~<~9~,~)o_O?/{d{D{6{4{$","~l~\\~M~K~<~;~,~+/~k~Z~O~J~=~:~-~*3","~o~_~L~>~:~.~*~l~\\~M~<~;~,~+","{T{Y","{S{J","{Y{I","{I{Y","{Y{J{S{I","{I{T","{Y","{Y{j","{H","{Y{H","{Z{Y","{j{Z","{i{j","{j{i","~\\~k","~k~\\","~_~n","~n~_","{M","{8{7","{7{J","{J{7","{7{8","{8{9","{9{:","{:{9","{Z{[","{Y{Z","{[{Z","{[","{V","{[{K{\\{Z{M","{Z{J{[{Y{L","{[{Y{L{Z{J","{\\{Z{M{[{K","{\\{M{L","{U{E{D","{7","{8{H","~o~n","~_~^","~Q~P~O~o~_~N","~o~_~N~Q~P~O","~^~_","~n~o","{H{G","{G{7","{H{8","{G{H","{7{G","~Z~J~>~,~^~N~K~-","~k~[~K~;~-~+{8~Z~J~>~:~,~*{H","{M{m","{L{<{]{M","{8",'~n~[~M~>~<{j{i{h{g~\\~N$#"!{:{9{8{7','~k$#"!{X{:{9{8{7~l~>~<{j{i{h{g{H',"%{k","{k%","'&$#\"!{m{l{j{i{h{g{]",'{m{l{j{i{h{g&$#"!',"{H{X","RDA2","bSDBA3","QCbDBA","RDA32SQC","QDC2bTB","SD","cRD3QC","bTSBcRD32","bTRBAQC","3bBA","bBAcR3","cQCbTBA","~p~O~Kp~o~[~N~J","~q~`~Z~P~I~?~9~/~)~p~_~O~K~>~:~.~*","~i~b~a~Y~:~*{Z{Y{X{W{8~q~`~Z~9~)p{j{i{h{g{H{*{){({'",'~k~Z~O~J~A~>~;~.~+{j{i{h{g{H~i~b~a~Y~I~?~:~/~*$#"!{X{:{9{8{7',"~m~]~N~L~=~<~-~,~k~Z~J~A~>~;~.~+","~M$#\"!{:{9{7{*{){({'~P~O{Z{Y{W","~n~^~K~;~+~m~]~N~<~,","~o~_~[~N~J~>~:~.~*~n~^~M~L~K~=~;~-~+","{k{[","{[%","{^{]{M{L","{l{j{i{h{g{^{Z{Y{X{W",'&$#"!{j{i{h{g{]',"('{l{\\","{m{l{\\{Z{Y{X{W('&$#\"!","{]{m{l","{M{L{]","{X{H","{8{X","~o~_~O~?~.tdG7'{o{n{m{l{^{]{\\{M{L{K{<{;{:{+{*{)~n~^~N~=~-scD@40$#\"!{i{Y{X{H{G{F{9{8{7{({'{&","~n~^~N~=~-scD{Y{X{W{O{N{H{={9{8{7~o~_~O~?~.td{o{n{:{+{*{)","~m~]~M~<~,fed43210/$#{t{i{h{g{f{d{G{F~n~^~N~=~-WG7'{m{l{^{]{\\{[{Z{O{N{M{L{K{J{I{={<{;{9{8{7","~n~^~N~=~-W@\"!{[{Z{J{I{9{8{7{({'{&~m~]~M~<~,fed321/{t{h{g{f{d{W","{9{6","{G{9","{V{G","{6{V","~X~Q~P~I~H~@~?~>~<~;~:~0~/~.~-~,~+~*utsrqdcb~t~p~o~k~i~a~_~]~\\~N","~p~_~]~O~A~9~8~1~)~!vpofea`_UTSRQPODCBA@~s~q~n~l~h~`~^~P~M~K~I~@~?~;~/~-~+s",'~n~a~^~N~;~/~+gWVFE543210/#"!{v{g{f{e~p~m~j~_~]~Z~Y~X~O~L~J~H~<~:~9~8~.~,~*~)tqpodca`_SQPOA@',"~R~=~-sc@6&%${k{j{i{[{Z{Y{X{J{I{H{G{F{9{8{7{({'{&~a~Q~>~;~0~/~+vurfebRCB321/{v{g{f{e","~t~s~q~p~o~m~l~k~j~i~h~a~`~_~]~\\~Z~Y~M~L~K~J~R~A~=~1~-~!sgcWVUTFED@6540&%$#\"!{k{j{i{[{Z{Y{X{J{I{H{G{F{9{8{7{({'{&","~i~[","~I~i","{u~I","{6{u","~[{6","~s~o~c~_~O~B~>~.tfed`PGCBA73{h{g{f{W~r~n~b~^~N~A~=~-scTD@0\"!{[{Z{J{I{9{8{7{({'{&","~r~p~b~`~Q~P~A~?~0~/vu@21'{l{[{Z{V{J{I{8{7{6~s~o~c~_~R~O~B~>~1~.~!tgd`CBA4{h{g{f{F","~q~n~a~^~N~>~-scTDA\"{m{\\{K{F{9{({'{&~r~p~b~`~P~?~/ueP@32{i{W{V{6","~r~b~R~=~1~!g@40!{i~q~a~Q~>~0vfGA71'{m{l{\\{K","{V{6","{F{V","{6{F"],re={attackM:{kf:N,f:[0,1,0,0,0,2,0,0,0,3,0,0,0,0,0,0,0,4]},attackN:{kf:b,f:[0,0,0,0,0,5,0,0,0,6,0,0,0,0,0,0,0,7]},attackO:{kf:Y,f:[0,0,0,0,0,8,0,0,0,9,0,0,0,0,0,0,0,10]},attackP:{kf:O,f:[0,11,0,0,0,12,0,0,0,0,0,0,0,0,0,0,0,13]},cocoM:{kf:D,f:[14,15,16,17,18,19,20,21]},cocoN:{kf:I,f:[22,23,24,25,26,27,28,28]},cocoO:{kf:R,f:[29,28,30,31,32,33,34,35]},heroM:{kf:C,f:[36,0,37,0,38,0,39]},heroN:{kf:F,f:[40,0,40,0,40,0,40]},heroO:{kf:L,f:[0,0,0,0,0,0,0]},idle0M:{kf:C,f:[0]},idle0N:{kf:b,f:[0]},idle0O:{kf:Y,f:[0]},idle0P:{kf:O,f:[0]},idle1M:{kf:C,f:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,41,0,0,0,0,0,0,0,42,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,43,0,0,0,0,0,0,0,44,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,45,0,0,0,0,0,0,0,46,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,47,0,0,0,0,0,0,0,11,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},idle1N:{kf:b,f:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,48,0,0,0,0,0,0,0,49,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,32,0,0,0,0,0,0,0,50,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,51,0,0,0,0,0,0,0,52,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,52,0,0,0,0,0,0,0,51,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},idle1O:{kf:Y,f:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,53,0,0,0,0,0,0,0,54,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,55,0,0,0,0,0,0,0,56,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,57,0,0,0,0,0,0,0,58,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,58,0,0,0,0,0,0,0,57,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},idle1P:{kf:O,f:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,44,0,0,0,0,0,0,0,59,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,59,0,0,0,0,0,0,0,41,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,11,0,0,0,0,0,0,0,47,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,46,0,0,0,0,0,0,0,45,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},idle2M:{kf:C,f:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,60,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,61,0,0,0,62,0,0,0,63,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,65,0,0,0,66,0,0,0,67,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,68,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,44,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},idle2N:{kf:b,f:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,48,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,50,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},idle2O:{kf:Y,f:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,53,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,56,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},idle2P:{kf:O,f:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,69,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,70,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,71,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,41,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},jump1M:{kf:S,f:[0]},jump1N:{kf:b,f:[0]},jump1O:{kf:Z,f:[0]},jump1P:{kf:J,f:[0]},jump2M:{kf:H,f:[0,0,0,72,0,0,0,73,0,0,0]},jump2N:{kf:b,f:[0,0,0,0,0,0,0,0,0,0,0]},jump2O:{kf:_,f:[0,0,0,74,0,0,0,75,0,0,0]},jump2P:{kf:B,f:[0,0,0,76,0,0,0,69,0,0,0]},jump3M:{kf:X,f:[0]},jump3N:{kf:b,f:[0]},jump3O:{kf:G,f:[0]},jump3P:{kf:K,f:[0]},jump4M:{kf:q,f:[0,0,0,77,0,0,0,78,0,0,0]},jump4N:{kf:T,f:[0,0,0,79,0,0,0,80,0,0,0]},jump4O:{kf:E,f:[0,0,0,81,0,0,0,82,0,0,0]},jump4P:{kf:Q,f:[0,0,0,0,0,0,0,83,0,0,0]},powerM:{kf:W,f:[0,0,0,84,0,0,0,85,0,0,0,86,0,0,0,87]},powerN:{kf:$,f:[0,0,0,88,0,0,0,89,0,0,0,90,0,0,0,91]},powerO:{kf:V,f:[0,0,0,92,0,0,0,93,0,0,0,94,0,0,0,95]},runM:{kf:U,f:[0,96,0,97,0,98,0,99,0,100,0,101,0,102,0,103,0]},runN:{kf:b,f:[0,0,0,0,0,104,0,79,0,0,0,105,0,0,0,0,0]},runO:{kf:Y,f:[0,0,0,106,0,107,0,108,0,109,0,110,0,111,0,112,0]},runP:{kf:O,f:[0,0,0,0,0,69,0,113,0,0,0,114,0,0,0,0,0]},zombie_attackM:{kf:ee,f:[0,0,0,0,0,0,0,0,0,0,0,115,0,0,0,0,0,0,0,0,0,0,0,116,0,0,0,0,0,0,0,0,0,0,0,117,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,118]},zombie_attackO:{kf:te,f:[0,0,0,0,0,0,0,0,0,0,0,119,0,0,0,0,0,0,0,0,0,0,0,120,0,0,0,0,0,0,0,0,0,0,0,121,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,122]},zombie_wakeM:{kf:ne,f:[0,0,0,0,0,0,0,0,0,0,0,123,0,0,0,0,0,0,0,0,0,0,0,124,0,0,0,0,0,0,0,0,0,0,0,125,0,0,0,0,0,0,0,0,0,0,0,126,0,0,0,0,0,0,0,0,0,0,0,127]},zombie_wakeO:{kf:ie,f:[0,0,0,0,0,0,0,0,0,0,0,128,0,0,0,0,0,0,0,0,0,0,0,129,0,0,0,0,0,0,0,0,0,0,0,130,0,0,0,0,0,0,0,0,0,0,0,131,0,0,0,0,0,0,0,0,0,0,0,132]},zombie_walkM:{kf:ee,f:[0,0,0,0,0,0,0,0,0,0,0,133,0,0,0,0,0,0,0,0,0,0,0,134,0,0,0,0,0,0,0,0,0,0,0,135,0,0,0,0,0,0,0,0,0,0,0,136]},zombie_walkO:{kf:te,f:[0,0,0,0,0,0,0,0,0,0,0,137,0,0,0,0,0,0,0,0,0,0,0,138,0,0,0,0,0,0,0,0,0,0,0,139,0,0,0,0,0,0,0,0,0,0,0,0]}},ae=16,fe=15,ce=function(e){for(var t=new Int16Array(ae),n=0;n<e.length;n++)t[e[n]>>4]|=1<<fe-(15&e[n]);return t},le=function(e){for(var t=0,n=e[t],i=[];n;){var o=86;"{"==n[0]&&(n=e[++t],o=0),"~"==n[0]&&(n=e[++t],o=172),i.push(n.charCodeAt()+o-33),n=e[++t]}return i},de=function(e){var t=this;t.x=0,t.y=0,t.color="#000",t.byteArray=new Int16Array(ae),t.data=le(e),t.frames=[],t.iFrame=0,t.byteArray=ce(t.data),t.pixelSize=0,t.direction=0,t.relx=0,t.rely=0,t.setPixelSize=function(e){t.pixelSize=e,t.height=t.width=16*t.pixelSize},t.addFrame=function(e){t.frames.push(ce(e)),t.iFrame=t.frames.length-1},t.animate=function(){if(++t.iFrame>=t.frames.length&&(t.iFrame=0),"string"==typeof t.frames[t.iFrame])return t.setAnimation(t.frames[t.iFrame]);for(var e=[],n=0;ae>n;n++){t.byteArray[n]=t.byteArray[n]^t.frames[t.iFrame][n];for(var i=0;ae>i;i++)1<<fe-i&t.byteArray[n]&&e.push(n*ae+i)}t.data=e},t.draw=function(e,n){u.fillStyle=g[this.color];for(var i=0;i<t.data.length;i++){var o=15&t.data[i];u.fillRect(Math.floor(t.x*m)+(t.direction?o:15-o)*t.pixelSize-e,Math.floor(t.y*m)+(t.data[i]>>4)*t.pixelSize-n,t.pixelSize,t.pixelSize)}},t.setAnimation=function(e){if(t.currentAnimation!=e&&re[e]){t.currentAnimation=e,t.frames=[];var n=re[e].f;for(t.byteArray=ce(le(re[e].kf)),j=0;j<n.length;j++){var i=oe[n[j]];if(-1==n[j])return t.iFrame=t.frames.length,t.frames.push("i");t.addFrame(le(i))}}},t.setPosition=function(e,n){t.x=e,t.y=n}},pe=function(e){var t=this;t.sprites=[];for(var n=0;n<e.length;n++){var i=new de(e[n].key);i.color=e[n].layer,i.layer=e[n].layer,t.sprites.push(i)}t.pixelSize=0,t.speed=1,t.speedY=0,t.acelerationY=0,t.x=0,t.y=0,t.direction=0,t.jumpPower=0,t.onEndAnimationLoop=void 0,t.currentAnimation="",t.setPixelSize=function(e){t.pixelSize=e,t.sprites.map(function(t){t.setPixelSize(e)})},t.animate=function(){for(var e=0;e<t.sprites.length;e++){var n=t.sprites[e];n.animate()}n.iFrame>=n.frames.length-1&&t.onEndAnimationLoop&&t.onEndAnimationLoop()},t.draw=function(e,n){for(var i=0;i<t.sprites.length;i++)t.sprites[i].draw(e,n)},t.setPos=function(e,n){t.x=e,t.y=n;for(var i=0;i<t.sprites.length;i++)t.sprites[i].x=e,t.sprites[i].y=n},t.fall=function(){t.acelerationY+=.1,t.acelerationY>2&&(t.acelerationY=2),t.speedY=t.acelerationY,t.y=Math.round(t.y+t.speedY),t.setPos(t.x,t.y)},t.move=function(e){t.x=Math.round(t.x+e),t.setPos(t.x,t.y)},t.setAnimation=function(e){t.currentAnimation=e;for(var n=0;n<t.sprites.length;n++){var i=t.sprites[n];i.setAnimation(e+i.layer)}},t.setDirection=function(e){t.direction=e,t.sprites.map(function(t){t.direction=e})},t.getLastLines=function(e){for(var n=[],i=0;e>i;i++)n.push(0);return t.sprites.reduce(function(t,n){for(var i=[],o=0;e>o;o++)i.push(t[e-o-1]|n.byteArray[15-o]);return i},n)},t.forward=function(){t.move(0==t.direction?1:-1)},t.turn=function(){t.direction=!t.direction,t.sprites.map(function(e){e.direction=t.direction})}},se=function(e){var t=this;t.name=e.nameCode,t.landed=!1;for(var n=[],i=0;4>i;i++){var o="MNOP"[i];console.log(t.name+o,!re[t.name+o]),re[t.name+o]&&n.push({key:t.name+o,layer:o})}t.sprite=new pe(n),t.sprite.setPixelSize(m),t.sprite.maxVx=e.vx||2*t.pixelSize,t.sprite.setPos(e.x,e.y),t.maxhp=e.hp,t.coldown=e.coldown,t.maxColdown=t.coldown,t.setActionPipe=function(e){for(var n="",i=0;i<e.length;i++){var o=e[i],r=parseInt(e.substring(i+1,i+4));if(r){i+=(""+r).length;for(var a=0;r>a;a++)n+=o}else n+=o}t.actionpipe=n},t.setActionPipe(e.actionpipe||"f60taw20"),t.actionIndex=0,t.attack1=function(){if(t.coldown<=0){t.sprite.setAnimation("p");var e=-(t.sprite.x-we.x),n=-(t.sprite.y-we.y),i=Math.sqrt(e*e+n*n);e/=i,n/=i,t.coldown=t.maxColdown}},t.follow=function(){t.sprite.direction=t.sprite.x<we.x,t.sprite.forward()},t.away=function(){t.sprite.direction=t.sprite.x>we.x,t.sprite.forward()},t.fall=function(){t.landed||(t.sprite.fall(),t.landed=-1!=Pe.map.checkLandCollision(t.sprite,y),console.log("LANDED!!!!"))},t.actions={f:t.sprite.forward,t:t.sprite.turn,j:t.sprite.jump,m:function(){},a:t.attack1,b:t.attack2,c:t.attack3,s:t.sprite.stopX,w:function(){},l:function(){Pe.map.checkLandCollision(t.sprite,y)||t.actionIndex--},d:function(){Pe.map.checkLandCollision(t.sprite,y)?t.sprite.stopX():(t.actionIndex--,t.sprite.forward())},g:t.follow,r:t.away,h:function(){t.sprite.fall=function(){}},x:function(){},u:function(){t.sprite.y-=3},n:function(){t.sprite.y+=3},k:function(){t.actions.u(),t.sprite.forward()},m:function(){t.actions.n(),t.sprite.forward()}},t.nextAction=function(){var e=t.actionpipe[t.actionIndex];t.actions[e](),++t.actionIndex>=t.actionpipe.length&&(t.actionIndex=0)},t.update=function(){t.nextAction(),--t.coldown<0&&(t.coldown=0)},t.triggers=[function(){console.log("do something after dead")}],t.trigger=function(e){t.triggers[t.triggerType]()},t.hit=function(e,n,i){var o=getTotalDamage(e,t.skills.current,n);t.sprite.x+=(i?1:-1)*o*(10-t.damage),t.sprite.hit(o)&&!t.del&&(t.del=1,t.trigger("death"))}},ue=function(e){var t=this;t.loaded=!1;var n=new Image;n.src=e,t.map=[],t.puzzle=void 0,t.enterPoints=[],n.onload=function(){u.drawImage(n,0,0),t.width=n.width,t.height=n.height;for(var e=u.getImageData(0,0,n.width,n.height),i=e.data,o=-1,r=0,a=i.length;a>r;r+=4){r%(4*n.width)==0&&(t.map.push([]),o++),t.map[o].push(Math.floor(i[r]/64));var f=Math.floor(i[r+1]/16),c=Math.floor(i[r+2]/16);t.processInfo(f,c,t.map[o].length-1,o)}t.loaded=!0,t.onReady&&t.onReady()},t.processInfo=function(e,n,i,o){if(1==e){var r=ke[n].current;t.puzzle=new ve(r,n),t.puzzle.x=i,t.puzzle.y=o}else 6==e&&(0>i-12&&(t.enterPoints.r={i:i,j:o-8}),i+12>t.width&&(t.enterPoints.l={i:i-8,j:o-8}),0>o-12&&(t.enterPoints.d={i:i-4,j:o}),o+12>t.height&&(t.enterPoints.u={i:i-4,j:o-8}),console.log(i,o,t.width,t.height),console.log(t.enterPoints))},t.draw=function(e,n,i,o){if(this.map&&this.map[0]){e=e+i>=t.width?t.width-i:e,n=n+o>=t.height?t.height-o:n;for(var r=0;o>r;r++)for(var a=0;i>a;a++){var f=this.map[r+n][a+e];3!=f&&(u.fillStyle=g["MNO"[f]],u.fillRect(a*m,r*m,m,m))}t.puzzle&&t.puzzle.draw(e-t.puzzle.x,n-t.puzzle.y)}},t.checkLandCollision=function(e,n){var i=e.getLastLines(n),o=e.x,r=e.y+1,a=r+15>t.height-1?t.height-1:r+15;a=n>a?n:a;for(var f=i.length-1;f>=0;f--){for(var c=0,l=0;15>l;l++){var d=t.map[a-f][o+l];c+=0==d?1<<15-l:0}if((c&i[f])>0)return a-f}return-1},t.checkLateralCollision=function(e){var n=e.x+(0==e.direction?11:4),i=e.y+3,o=i+10>t.height-1?t.height-1:i+10;0>i&&(i=0);for(var r=!1,a=i;o>a;a++)if(0==t.map[a][n]){if(r)return!0;r=!0}return!1},t.enterPos=function(e){return console.log(e),t.enterPoints[e]}},me=function(){var e=this;e.map=new ue("assets/Af.png"),e.cont=0,e.coords={x:0,y:0},e.enter=!1,e.down=!1,e.readInputs=function(){var t={x:0,y:0,canMove:!0,landed:-1};return n("40")?e.down=!0:e.down&&(t.down=!0,e.down=!1,we.y+=4,t.landed=e.map.checkLandCollision(we,y),-1!=t.landed&&(we.y-=4)),t.landed=e.map.checkLandCollision(we,y),n("37")?(t.x=-we.speed,we.setDirection(1)):n("39")&&(t.x=we.speed,we.setDirection(0)),n("38")&&-1!=t.landed&&(we.collides=!1,we.acelerationY=k,we.jumpPower=0,we.lockJump=!1,we.setAnimation("jump1")),n("38")&&we.acelerationY<0&&!we.lockJump&&(we.jumpPower+=1,we.acelerationY=k,we.lockJump=we.jumpPower>A),n("13")?e.enter=!0:e.enter&&(t.enter=!0,e.enter=!1),t.canMove=!e.map.checkLateralCollision(we),t},e.update=function(t){return t.enter&&e.map.puzzle&&(ze.puzzle=e.map.puzzle,ze.x=e.coords.x,ze.y=e.coords.y,we.setAnimation("idle2"),l(11,30),f(ze)),we.x<=-10&&i("l")?e.changeMap("l"):we.x>=e.map.width-5&&i("r")?e.changeMap("r"):we.y<=-15&&i("u")?e.changeMap("u"):we.y>=e.map.height-1&&i("d")?e.changeMap("d"):(0==t.x&&0==we.jumpPower&&"jump4"!=we.currentAnimation&&"jump3"!=we.currentAnimation&&we.setAnimation(Me),t.canMove&&0!=t.x&&(0==we.jumpPower&&"jump4"!=we.currentAnimation&&we.setAnimation("run"),we.move(t.x)),we.fall(),we.animate(),e.cont++,400==e.cont&&(Me="idle"+(1+Math.round(Math.random())),we.onEndAnimationLoop=function(){Me="idle0",we.setAnimation(Me),we.onEndAnimationLoop=void 0}),e.cont>1e3&&(e.cont=0),we.acelerationY<0&&we.acelerationY>-.1&&we.setAnimation("jump2"),-1!=t.landed&&we.acelerationY>0&&(t.landed-we.y!=16&&we.speedY>.3&&(we.setAnimation("jump4"),we.onEndAnimationLoop=function(){Me="idle0",e.cont=0,we.setAnimation(Me),we.onEndAnimationLoop=void 0}),we.acelerationY=0,we.setPos(we.x,t.landed-16),we.jumpPower=0),we.speedY>0&&we.acelerationY>0&&0==we.jumpPower&&we.setAnimation("jump3"),e.coords.x=we.x-24,e.coords.y=we.y-24,e.coords.x<0?e.coords.x=0:e.coords.x>e.map.width-h&&(e.coords.x=e.map.width-h),e.coords.y<0?e.coords.y=0:e.coords.y>e.map.height-h&&(e.coords.y=e.map.height-h),je.fall(),je.update(),je.sprite.animate(),void xe.animate())},e.draw=function(){u.fillStyle=g.D,u.fillRect(0,0,m*h,m*h),e.map.draw(Math.floor(e.coords.x),Math.floor(e.coords.y),h,h),je.sprite.draw(e.coords.x*m,e.coords.y*m),xe.draw(e.coords.x*m,e.coords.y*m)},e.changeMap=function(t){var n=o(t);e.map=new ue("assets/"+n.name+".png"),e.map.onReady=function(){var n=e.map.enterPos(t);console.log(n),we.setPos(n.i,n.j),e.coords.x=we.x-24,e.coords.y=we.y-24}},e.isReady=function(){return e.map.loaded}},he={1:{draw:function(e,t,n){u.fillRect(e+n*m,t,m,n*m)}},2:{draw:function(e,t,n){u.fillRect(e+n*m,t+n*m,n*m,m)}},4:{draw:function(e,t,n){u.fillRect(e+n*m,t+n*m,m,n*m)}},8:{draw:function(e,t,n){u.fillRect(e,t+n*m,n*m,m)}}},ve=function(e,t){var n=this;n.pieces=[],n.loaded=!1,n.enter=15,n.exit=7,n.proportion=8,n["void"]={i:0,j:0},n.id=t,n.decode=function(e){var t=!1;n.enter=parseInt(e[0],16),n.exit=parseInt(e[1],16);for(var i=0;4>i;i++){n.pieces.push([]);for(var o=0;4>o;o++){var r=parseInt(e[4*i+o+2],16);n.pieces[i][o]=r,0!=r||t||(n.pieces[i][o]=-1,n["void"].i=o,n["void"].j=i,t=!0)}}n.loaded=!0},n.encode=function(){var e="";e+=n.enter.toString("16"),e+=n.exit.toString("16"),n.pieces[n["void"].j][n["void"].i]=0;for(var t=0;4>t;t++)for(var i=0;4>i;i++)e+=n.pieces[t][i].toString("16");return n.pieces[n["void"].j][n["void"].i]=-1,e},n.exchange=function(e,t){var i=n.pieces[t][e];n.pieces[t][e]=-1,n.pieces[n["void"].j][n["void"].i]=i},n.toLeft=function(){0!=n["void"].i&&(n.exchange(n["void"].i-1,n["void"].j),n["void"].i-=1)},n.toRight=function(){3!=n["void"].i&&(n.exchange(n["void"].i+1,n["void"].j),n["void"].i+=1)},n.toTop=function(){0!=n["void"].j&&(n.exchange(n["void"].i,n["void"].j-1),n["void"].j-=1)},n.toBottom=function(){3!=n["void"].j&&(n.exchange(n["void"].i,n["void"].j+1),n["void"].j+=1)},n.draw=function(e,t){e=e||0,t=t||0,u.fillStyle=g.P,u.fillRect(-e*m,-t*m,32*m,32*m);for(var i=0;4>i;i++)for(var o=0;4>o;o++){var r=n.pieces[i][o],a=o*n.proportion*m-e*m,f=i*n.proportion*m-t*m,c=n.proportion/2;u.fillStyle=g.N,u.fillRect(a,f,n.proportion*m,m),u.fillRect(a,f+n.proportion*m,n.proportion*m,m),u.fillRect(a,f,m,n.proportion*m),u.fillRect(a+n.proportion*m,f,m,n.proportion*m),0>=r?(0==r&&(u.fillStyle=g.P),u.fillRect(a+m,f+m,(n.proportion-1)*m,(n.proportion-1)*m)):(u.fillStyle=g.M,(1&r)>0&&he[1].draw(a,f,c),(2&r)>0&&he[2].draw(a,f,c),(4&r)>0&&he[4].draw(a,f,c),(8&r)>0&&he[8].draw(a,f,c))}},n.decode(e)},ge=function(){var e=this;e.puzzle=new ve("F70101010101010101"),we.setAnimation("idle2"),e.up=!1,e.down=!1,e.left=!1,e.right=!1,e.readInputs=function(){var t={up:!1,down:!1,left:!1,right:!1,enter:!1};return n("37")?e.left=!0:e.left&&(t.left=!0,e.left=!1),n("39")?e.right=!0:e.right&&(t.right=!0,e.right=!1),n("38")?e.up=!0:e.up&&(t.up=!0,e.up=!1),n("40")?e.down=!0:e.down&&(t.down=!0,e.down=!1),n("13")?e.enter=!0:e.enter&&(t.enter=!0,e.enter=!1),t},e.update=function(t){t.enter&&(ke[e.puzzle.id].current=e.puzzle.encode(),a("A",ke[e.puzzle.id].current),l(11,30),f(Pe)),t.right&&e.puzzle.toRight(),t.left&&e.puzzle.toLeft(),t.up&&e.puzzle.toTop(),t.down&&e.puzzle.toBottom()},e.draw=function(){e.puzzle.draw(e.x-e.puzzle.x,e.y-e.puzzle.y)},e.isReady=function(){return e.puzzle.loaded}},ke={2:{original:"F7AC2C69053C6D0393",current:"F7AC2C69053C6D0393"}},Ae={0:{r:"1"},1:{l:"0",u:"A"},2:{l:"3",r:"4",d:"1"},3:{r:"2",l:"A",u:"B"},4:{l:"2",r:"C",d:"D"},A:{l:"A",r:"A",p:"2",code:"A"},AZ:{l:"p",code:"AZ"},B:{t:"p",d:"3"},C:{t:"p",l:"3"},D:{t:"p",u:"3"},Af:{u:"A4",l:"A2",d:"A1",r:"A8"},A1:{u:"Af"},A2:{r:"Af"},A4:{d:"Af"},A8:{l:"Af"}},ye=Ae.Af;a("A",ke[2].current);var we=new pe([{key:N,layer:"M"},{key:b,layer:"N"},{key:Y,layer:"O"},{key:O,layer:"P"}]);we.setAnimation("idle0"),we.setPixelSize(m),we.setPos(32,32);var xe=new pe([{key:W,layer:"M"},{key:$,layer:"N"},{key:V,layer:"O"}]);xe.setAnimation("power"),xe.setPixelSize(m),xe.setPos(16,16);var je=new se({nameCode:"zombie_attack",hp:10,x:10,y:10});je.sprite.setAnimation("zombie_walk");var Me="idle0",Pe=new me,ze=new ge,Ne=Pe,be=["exp2","gboy2","gboy3","exp1","gboy"],Ye=0;s.addEventListener("click",function(t){Ye+=1,4==Ye&&(Ye=0),e(v[be[Ye]],Math.random()>.5),t.preventDefault()});var Oe=0,De=20,Ie=30;ra(d)}();