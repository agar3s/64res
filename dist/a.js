!function(){function e(e,t){g.M=t?e.P:e.M,g.N=t?e.O:e.N,g.O=t?e.N:e.O,g.P=t?e.M:e.P}function t(){var e=g.M,t=g.N,i=g.O,n=g.P;g.M=n,g.N=i,g.O=t,g.P=e}function i(e){return P&z[e]}function n(e){var t=we[e];return!!t}function o(e){var t=we[e];return we=ye[t],{name:we.code||t,data:we}}function r(e,t,i,n){var o={code:n+i.toString(16),value:i},r=n+(e-1)+""+t,a=n+e+""+(t-1);return 0!=e&&8&i&&2&ye[r].value&&(o.l=r,ye[r].r=n+e+""+t),0!=t&&1&i&&4&ye[a].value&&(o.u=a,ye[a].d=n+e+""+t),o}function a(e,t){console.log("going to generate rooms");for(var i=ye[e],n=ye[e+"Z"],o=0;4>o;o++)for(var a=0;4>a;a++){var f=parseInt(t[4*o+a+2],16),c=r(a,o,f,e);0==a&&0==o&&(c.l=i.code,i.r=e+a+""+o),3==a&&3==o&&(c.r=n.code,n.l=e+a+""+o),ye[e+a+""+o]=c}}function f(e){Ne=e}function c(){Ye>=be||setTimeout(function(){t(),Ye++,c()},Ie)}function p(e,t){Ye=0,be=e||be,Ie=t||Ie,c()}function l(){if(!Ne.isReady())return ra(l);var e=Ne.readInputs();Ne.update(e),u.fillStyle=g.P,Ne.draw(),Ae.draw(Pe.coords.x*m,Pe.coords.y*m),xe.draw(Pe.coords.x*m,Pe.coords.y*m),u.fillStyle="#333",u.fillRect(0,64*m,900,64*m),u.fillRect(64*m,0,900-64*m,500),ra(l)}var d=document;d.get=d.getElementById;for(var s=d.get("c"),u=s.getContext("2d"),m=7,h=64,v={gboy:{M:"#0E3A19",N:"#32623D",O:"#6D9F6B",P:"#96BA39"},gboy2:{M:"#0E1D24",N:"#2B6752",O:"#81BF76",P:"#DDF8D1"},gboy3:{M:"#000000",N:"#525252",O:"#929292",P:"#FFFFFF"},exp1:{M:"#A4155D",N:"#525252",O:"#F14D9F",P:"#E2FFE2"},exp2:{M:"#F21E12",N:"#890902",O:"#1C492D",P:"#000000"}},g=v[Object.keys(v)[Math.floor(5*Math.random())]],k=-1,y=15,w=3,A=0,x=["ms","moz","webkit","o"],M=0;M<x.length&&!window.requestAnimationFrame;++M)requestAnimationFrame=window[x[M]+"RequestAnimationFrame"];requestAnimationFrame||(requestAnimationFrame=function(e){var t=(new Date).getTime(),i=Math.max(0,16-(t-A)),n=setTimeout(function(){e(t+i)},i);return A=t+i,n}),ra=requestAnimationFrame;var P=0,z={37:1,38:2,39:4,40:8,65:16,83:32,68:64,32:128,13:256,49:512,50:1024,51:2048,52:4096,53:8192,54:16384,55:32768,56:65536,57:131072};d.addEventListener("keydown",function(e){var t=e.keyCode||e.which;z[t]&&(P|=z[t],e.preventDefault())}),d.addEventListener("keyup",function(e){var t=e.keyCode?e.keyCode:e.which;P&z[t]&&(P^=z[t],e.preventDefault())});var N="{'{({){*{7{9{:{G{H{I{J{g{h{i{j{k!\"#$%&1234ABCDQRSTabcdqrst~+~.~;~>~K~N~[~^~k~n",O="{[",F="{L{M{W{X{Y{Z{\\",Y="{8",b="{%{&{'{({5{7{8{E{F{G{H{e{f{g{h{u{v!\"/012@ABCPQRS`abcpqrs~*~.~:~>~K~L~N~_~o",I="{I{J{U{V{W{X{Y",S="{j",D="{'{({){*{7{9{:{G{H{I{J{g{h{i{j!\"#$1234ABCDQRSTabcdqrst~+~.~;~>~K~N~[~^~k~n",C="{K{L{W{X{Y{Z{[",Z="{l",R="{'{){*{7{8{9{:{G{H{I{J{g{h{i{j!\"#$1234ABCDQRSTabcdqrst~+~.~;~>~L~N~\\~^~n",L="{W{X{Y{Z{\\{l&",J="{(",_="{'{({){*{7{9{:{G{H{I{J{g{h{i{j!\"#$1234ABCDQRSTabcdqrst~*~-~:~=~K~N~^",H="{W{X{Y{Z{\\{]{m",q="",X="{'{({){*{7{8{9{:{G{I{J{g{h{i{j!\"#$1234ABCDQRSTabcdqrst~+~-~;~=~K~[~k",B="{<{L{W{X{Y{Z{\\",E="{H",G='{7{8{9{:{G{H{I{J{W{Y{Z!"#$1234ABCDQRSTabcdqrst~+~,~-~.~;~=~K~N~\\~^~l',K="{k",Q="{]{g{h{i{j{l{m",$="{X",T="{X{Y{f{g{h{j{k{u!$&/02356>?ACDGNORSUVW_adfoprsuv~*~+~,~.~/~<~=",W='{i{v"4@BFQ`ceq',V="#%1EPTbt~-",U="{'{({){*{7{9{:{G{H{I{J{g{h{i{j!\"#$1234ABCDQRSTabcdqrst~*~.~:~>~J~N~[~_~o",ee="{&{'{({7{8{9{F{G{H{I{J{X{Y{Z{[{i{j{k!\"#$%&0456@DEFTUVWcgs~!~-~1~=~A~N~R~^~b~n~r",te="{6",ie="~J~K~L~M~N~Y~Z~\\~]~^~_~`~a~b~h~i~j~k~l~m~n~o~p~q~r~s~t",ne="~[",oe=["","~o~j~_~Z~J{8~n~k~^~[~K{9","~p~i~`~O~?~/~-~,ueUFE65{v{[{Z{Y{X{K{;{9~o~j~_~N~>~+qaQA1{k{j{i{h{g{I{G{7{*{){({'","~K~<~0vfXVH8'{u{\\{L{<~J~;~,rbRB2{X{H{8","~n~k~^~[~N~>~;~+rqbaRQBA21{k{j{i{h{g{I{H{G{7{*{){({'~p~i~`~Z~O~?~<~0~/~-vufeXVUHFE865'{v{u{\\{[{Z{Y{L{K{<{;","{l{[","{m{l","{[{m","{n{m{k{j{i{h{_{\\{Z{Y{X{W{M{L","{p{o{l{m{h{_","{\\{Z{Y{X{W{M{L{p{o{n{l{k{j{i","{9{8","{I{9","{8{I","~p~O~;~9~8~(o_O?{D{6{4{$~o~N~L~K~*C{H{8{5{(","~N~H~=~7~-~'nN>.{t{d{C{5{3{#~O~>~;~:~9~8~.~(scSRB2\"{h{G{7{4{'","~`~W~G~p~H","~g~P~O~8~(RB~`~_~7~'nN>","~i~X~M~H~<~9~,~)2\"{G{7{4{'~g~W~P~G~=~8~-~(.{t{C{5{3{#","~k~Z~J~=~:~-~*scSC3{h{H{8{5{(~i~X~M~H~<~9~,~)o_O?/{d{D{6{4{$","~l~\\~M~K~<~;~,~+/~k~Z~O~J~=~:~-~*3","~o~_~L~>~:~.~*~l~\\~M~<~;~,~+","{T{Y","{S{J","{Y{I","{I{Y","{Y{J{S{I","{I{T","{Y","{Y{j","{H","{Y{H","{Z{Y","{j{Z","{i{j","{j{i","~\\~k","~k~\\","~_~n","~n~_","{M","{8{7","{7{J","{J{7","{7{8","{8{9","{9{:","{:{9","{Z{[","{Y{Z","{[{Z","{[","{V","{[{K{\\{Z{M","{Z{J{[{Y{L","{[{Y{L{Z{J","{\\{Z{M{[{K","{\\{M{L","{U{E{D","{7","{8{H","~o~n","~_~^","~Q~P~O~o~_~N","~o~_~N~Q~P~O","~^~_","~n~o","{H{G","{G{7","{H{8","{G{H","{7{G","~Z~J~>~,~^~N~K~-","~k~[~K~;~-~+{8~Z~J~>~:~,~*{H","{M{m","{L{<{]{M","{8",'~n~[~M~>~<{j{i{h{g~\\~N$#"!{:{9{8{7','~k$#"!{X{:{9{8{7~l~>~<{j{i{h{g{H',"%{k","{k%","'&$#\"!{m{l{j{i{h{g{]",'{m{l{j{i{h{g&$#"!',"{H{X","qbQF%usrpaURC53","U5#~,qbVSQOFDA?0${h","sqbSPECA1${v{h5%#!","~,urpaVROD?530!qbPE1{v","saUT53qQF","~-tqbVSQOEDC1$saUT54{i","~,paF?%~-qb`VSQOECB@1${v","q`QB@4{v{i~,tpaD?3%","urpRCbT%","~,saTFA?40{i{h~-tEC1#","~-`VQOB@5#!~,spaPFA?{h","tbPE1%ur`VRQOB@540!{i","~p~O~Kp~o~[~N~J","~q~`~Z~P~I~?~9~/~)~p~_~O~K~>~:~.~*","~i~b~a~Y~:~*{Z{Y{X{W{8~q~`~Z~9~)p{j{i{h{g{H{*{){({'",'~k~Z~O~J~A~>~;~.~+{j{i{h{g{H~i~b~a~Y~I~?~:~/~*$#"!{X{:{9{8{7',"~m~]~N~L~=~<~-~,~k~Z~J~A~>~;~.~+","~M$#\"!{:{9{7{*{){({'~P~O{Z{Y{W","~n~^~K~;~+~m~]~N~<~,","~o~_~[~N~J~>~:~.~*~n~^~M~L~K~=~;~-~+","{k{[","{[%","{^{]{M{L","{l{j{i{h{g{^{Z{Y{X{W",'&$#"!{j{i{h{g{]',"('{l{\\","{m{l{\\{Z{Y{X{W('&$#\"!","{]{m{l","{M{L{]","{X{H","{8{X","~o~_~O~?~.tdG7'{o{n{m{l{^{]{\\{M{L{K{<{;{:{+{*{)~n~^~N~=~-scD@40$#\"!{i{Y{X{H{G{F{9{8{7{({'{&","~n~^~N~=~-scD{Y{X{W{O{N{H{={9{8{7~o~_~O~?~.td{o{n{:{+{*{)","~m~]~M~<~,fed43210/$#{t{i{h{g{f{d{G{F~n~^~N~=~-WG7'{m{l{^{]{\\{[{Z{O{N{M{L{K{J{I{={<{;{9{8{7","~n~^~N~=~-W@\"!{[{Z{J{I{9{8{7{({'{&~m~]~M~<~,fed321/{t{h{g{f{d{W","{9{6","{G{9","{V{G","{6{V","~X~Q~P~I~H~@~?~>~<~;~:~0~/~.~-~,~+~*utsrqdcb~t~p~o~k~i~a~_~]~\\~N","~p~_~]~O~A~9~8~1~)~!vpofea`_UTSRQPODCBA@~s~q~n~l~h~`~^~P~M~K~I~@~?~;~/~-~+s",'~n~a~^~N~;~/~+gWVFE543210/#"!{v{g{f{e~p~m~j~_~]~Z~Y~X~O~L~J~H~<~:~9~8~.~,~*~)tqpodca`_SQPOA@',"~R~=~-sc@6&%${k{j{i{[{Z{Y{X{J{I{H{G{F{9{8{7{({'{&~a~Q~>~;~0~/~+vurfebRCB321/{v{g{f{e","~t~s~q~p~o~m~l~k~j~i~h~a~`~_~]~\\~Z~Y~M~L~K~J~R~A~=~1~-~!sgcWVUTFED@6540&%$#\"!{k{j{i{[{Z{Y{X{J{I{H{G{F{9{8{7{({'{&","~i~[","~I~i","{u~I","{6{u","~[{6","~s~o~c~_~O~B~>~.tfed`PGCBA73{h{g{f{W~r~n~b~^~N~A~=~-scTD@0\"!{[{Z{J{I{9{8{7{({'{&","~r~p~b~`~Q~P~A~?~0~/vu@21'{l{[{Z{V{J{I{8{7{6~s~o~c~_~R~O~B~>~1~.~!tgd`CBA4{h{g{f{F","~q~n~a~^~N~>~-scTDA\"{m{\\{K{F{9{({'{&~r~p~b~`~P~?~/ueP@32{i{W{V{6","~r~b~R~=~1~!g@40!{i~q~a~Q~>~0vfGA71'{m{l{\\{K","{V{6","{F{V","{6{F"],re={attackM:{kf:N,f:[0,1,0,0,0,2,0,0,0,3,0,0,0,0,0,0,0,4]},attackN:{kf:O,f:[0,0,0,0,0,5,0,0,0,6,0,0,0,0,0,0,0,7]},attackO:{kf:F,f:[0,0,0,0,0,8,0,0,0,9,0,0,0,0,0,0,0,10]},attackP:{kf:Y,f:[0,11,0,0,0,12,0,0,0,0,0,0,0,0,0,0,0,13]},cocoM:{kf:b,f:[14,15,16,17,18,19,20,21]},cocoN:{kf:I,f:[22,23,24,25,26,27,28,28]},cocoO:{kf:S,f:[29,28,30,31,32,33,34,35]},heroM:{kf:D,f:[36,0,37,0,38,0,39]},heroN:{kf:C,f:[40,0,40,0,40,0,40]},heroO:{kf:Z,f:[0,0,0,0,0,0,0]},idle0M:{kf:D,f:[0]},idle0N:{kf:O,f:[0]},idle0O:{kf:F,f:[0]},idle0P:{kf:Y,f:[0]},idle1M:{kf:D,f:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,41,0,0,0,0,0,0,0,42,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,43,0,0,0,0,0,0,0,44,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,45,0,0,0,0,0,0,0,46,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,47,0,0,0,0,0,0,0,11,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},idle1N:{kf:O,f:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,48,0,0,0,0,0,0,0,49,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,32,0,0,0,0,0,0,0,50,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,51,0,0,0,0,0,0,0,52,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,52,0,0,0,0,0,0,0,51,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},idle1O:{kf:F,f:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,53,0,0,0,0,0,0,0,54,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,55,0,0,0,0,0,0,0,56,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,57,0,0,0,0,0,0,0,58,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,58,0,0,0,0,0,0,0,57,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},idle1P:{kf:Y,f:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,44,0,0,0,0,0,0,0,59,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,59,0,0,0,0,0,0,0,41,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,11,0,0,0,0,0,0,0,47,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,46,0,0,0,0,0,0,0,45,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},idle2M:{kf:D,f:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,60,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,61,0,0,0,62,0,0,0,63,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,65,0,0,0,66,0,0,0,67,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,68,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,44,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},idle2N:{kf:O,f:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,48,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,50,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},idle2O:{kf:F,f:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,53,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,56,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},idle2P:{kf:Y,f:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,69,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,70,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,71,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,41,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},jump1M:{kf:R,f:[0]},jump1N:{kf:O,f:[0]},jump1O:{kf:L,f:[0]},jump1P:{kf:J,f:[0]},jump2M:{kf:_,f:[0,0,0,72,0,0,0,73,0,0,0]},jump2N:{kf:O,f:[0,0,0,0,0,0,0,0,0,0,0]},jump2O:{kf:H,f:[0,0,0,74,0,0,0,75,0,0,0]},jump2P:{kf:q,f:[0,0,0,76,0,0,0,69,0,0,0]},jump3M:{kf:X,f:[0]},jump3N:{kf:O,f:[0]},jump3O:{kf:B,f:[0]},jump3P:{kf:E,f:[0]},jump4M:{kf:G,f:[0,0,0,77,0,0,0,78,0,0,0]},jump4N:{kf:K,f:[0,0,0,79,0,0,0,80,0,0,0]},jump4O:{kf:Q,f:[0,0,0,81,0,0,0,82,0,0,0]},jump4P:{kf:$,f:[0,0,0,0,0,0,0,83,0,0,0]},powerM:{kf:T,f:[0,0,0,84,0,0,0,85,0,0,0,86,0,0,0,87]},powerN:{kf:W,f:[0,0,0,88,0,0,0,89,0,0,0,90,0,0,0,91]},powerO:{kf:V,f:[0,0,0,92,0,0,0,93,0,0,0,94,0,0,0,95]},runM:{kf:U,f:[0,96,0,97,0,98,0,99,0,100,0,101,0,102,0,103,0]},runN:{kf:O,f:[0,0,0,0,0,104,0,79,0,0,0,105,0,0,0,0,0]},runO:{kf:F,f:[0,0,0,106,0,107,0,108,0,109,0,110,0,111,0,112,0]},runP:{kf:Y,f:[0,0,0,0,0,69,0,113,0,0,0,114,0,0,0,0,0]},zombie_attackM:{kf:ee,f:[0,0,0,0,0,0,0,0,0,0,0,115,0,0,0,0,0,0,0,0,0,0,0,116,0,0,0,0,0,0,0,0,0,0,0,117,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,118]},zombie_attackO:{kf:te,f:[0,0,0,0,0,0,0,0,0,0,0,119,0,0,0,0,0,0,0,0,0,0,0,120,0,0,0,0,0,0,0,0,0,0,0,121,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,122]},zombie_wakeM:{kf:ie,f:[0,0,0,0,0,0,0,0,0,0,0,123,0,0,0,0,0,0,0,0,0,0,0,124,0,0,0,0,0,0,0,0,0,0,0,125,0,0,0,0,0,0,0,0,0,0,0,126,0,0,0,0,0,0,0,0,0,0,0,127]},zombie_wakeO:{kf:ne,f:[0,0,0,0,0,0,0,0,0,0,0,128,0,0,0,0,0,0,0,0,0,0,0,129,0,0,0,0,0,0,0,0,0,0,0,130,0,0,0,0,0,0,0,0,0,0,0,131,0,0,0,0,0,0,0,0,0,0,0,132]},zombie_walkM:{kf:ee,f:[0,0,0,0,0,0,0,0,0,0,0,133,0,0,0,0,0,0,0,0,0,0,0,134,0,0,0,0,0,0,0,0,0,0,0,135,0,0,0,0,0,0,0,0,0,0,0,136]},zombie_walkO:{kf:te,f:[0,0,0,0,0,0,0,0,0,0,0,137,0,0,0,0,0,0,0,0,0,0,0,138,0,0,0,0,0,0,0,0,0,0,0,139,0,0,0,0,0,0,0,0,0,0,0,0]}},ae=16,fe=15,ce=function(e){for(var t=new Int16Array(ae),i=0;i<e.length;i++)t[e[i]>>4]|=1<<fe-(15&e[i]);return t},pe=function(e){for(var t=0,i=e[t],n=[];i;){var o=86;"{"==i[0]&&(i=e[++t],o=0),"~"==i[0]&&(i=e[++t],o=172),n.push(i.charCodeAt()+o-33),i=e[++t]}return n},le=function(e){var t=this;t.x=0,t.y=0,t.color="#000",t.byteArray=new Int16Array(ae),t.data=pe(e),t.frames=[],t.iFrame=0,t.byteArray=ce(t.data),t.pixelSize=0,t.direction=0,t.relx=0,t.rely=0,t.setPixelSize=function(e){t.pixelSize=e,t.height=t.width=16*t.pixelSize},t.addFrame=function(e){t.frames.push(ce(e)),t.iFrame=t.frames.length-1},t.animate=function(){if(++t.iFrame>=t.frames.length&&(t.iFrame=0),"string"==typeof t.frames[t.iFrame])return t.setAnimation(t.frames[t.iFrame]);for(var e=[],i=0;ae>i;i++){t.byteArray[i]=t.byteArray[i]^t.frames[t.iFrame][i];for(var n=0;ae>n;n++)1<<fe-n&t.byteArray[i]&&e.push(i*ae+n)}t.data=e},t.draw=function(e,i){u.fillStyle=g[this.color];for(var n=0;n<t.data.length;n++){var o=15&t.data[n];u.fillRect(Math.floor(t.x*m)+(t.direction?o:15-o)*t.pixelSize-e,Math.floor(t.y*m)+(t.data[n]>>4)*t.pixelSize-i,t.pixelSize,t.pixelSize)}},t.setAnimation=function(e){if(t.currentAnimation!=e&&re[e]){t.currentAnimation=e,t.frames=[];var i=re[e].f;for(t.byteArray=ce(pe(re[e].kf)),j=0;j<i.length;j++){var n=oe[i[j]];if(-1==i[j])return t.iFrame=t.frames.length,t.frames.push("i");t.addFrame(pe(n))}}},t.setPosition=function(e,i){t.x=e,t.y=i}},de=function(e){var t=this;t.sprites=[];for(var i=0;i<e.length;i++){var n=new le(e[i].key);n.color=e[i].layer,n.layer=e[i].layer,t.sprites.push(n)}t.pixelSize=0,t.speed=1,t.speedY=0,t.acelerationY=0,t.x=0,t.y=0,t.direction=0,t.jumpPower=0,t.onEndAnimationLoop=void 0,t.currentAnimation="",t.setPixelSize=function(e){t.pixelSize=e,t.sprites.map(function(t){t.setPixelSize(e)})},t.animate=function(){for(var e=0;e<t.sprites.length;e++){var i=t.sprites[e];i.animate()}i.iFrame>=i.frames.length-1&&t.onEndAnimationLoop&&t.onEndAnimationLoop()},t.draw=function(e,i){for(var n=0;n<t.sprites.length;n++)t.sprites[n].draw(e,i)},t.setPos=function(e,i){t.x=e,t.y=i;for(var n=0;n<t.sprites.length;n++)t.sprites[n].x=e,t.sprites[n].y=i},t.fall=function(){t.acelerationY+=.1,t.acelerationY>2&&(t.acelerationY=2),t.speedY=t.acelerationY,t.y=Math.round(t.y+t.speedY),t.setPos(t.x,t.y)},t.move=function(e){t.x=Math.round(t.x+e),t.setPos(t.x,t.y)},t.setAnimation=function(e){t.currentAnimation=e;for(var i=0;i<t.sprites.length;i++){var n=t.sprites[i];n.setAnimation(e+n.layer)}},t.setDirection=function(e){t.direction=e,t.sprites.map(function(t){t.direction=e})},t.getLastLines=function(e){for(var i=[],n=0;e>n;n++)i.push(0);return t.sprites.reduce(function(t,i){for(var n=[],o=0;e>o;o++)n.push(t[e-o-1]|i.byteArray[15-o]);return n},i)},t.forward=function(){t.move(0==t.direction?1:-1)},t.turn=function(){t.direction=!t.direction,t.sprites.map(function(e){e.direction=t.direction})}},se=function(e){var t=this;t.name=e.nameCode,t.landed=!1;for(var i=[],n=0;4>n;n++){var o="MNOP"[n];console.log(t.name+o,!re[t.name+o]),re[t.name+o]&&i.push({key:t.name+o,layer:o})}t.sprite=new de(i),t.sprite.setPixelSize(m),t.sprite.maxVx=e.vx||2*t.pixelSize,t.sprite.setPos(e.x,e.y),t.maxhp=e.hp,t.coldown=e.coldown,t.maxColdown=t.coldown,t.setActionPipe=function(e){for(var i="",n=0;n<e.length;n++){var o=e[n],r=parseInt(e.substring(n+1,n+4));if(r){n+=(""+r).length;for(var a=0;r>a;a++)i+=o}else i+=o}t.actionpipe=i},t.setActionPipe(e.actionpipe||"f60taw20"),t.actionIndex=0,t.attack1=function(){if(t.coldown<=0){t.sprite.setAnimation("p");var e=-(t.sprite.x-Ae.x),i=-(t.sprite.y-Ae.y),n=Math.sqrt(e*e+i*i);e/=n,i/=n,t.coldown=t.maxColdown}},t.follow=function(){t.sprite.direction=t.sprite.x<Ae.x,t.sprite.forward()},t.away=function(){t.sprite.direction=t.sprite.x>Ae.x,t.sprite.forward()},t.fall=function(){t.landed||(t.sprite.fall(),t.landed=-1!=Pe.map.checkCollision(t.sprite,w),console.log("LANDED!!!!"))},t.actions={f:t.sprite.forward,t:t.sprite.turn,j:t.sprite.jump,m:function(){},a:t.attack1,b:t.attack2,c:t.attack3,s:t.sprite.stopX,w:function(){},l:function(){Pe.map.checkCollision(t.sprite,w)||t.actionIndex--},d:function(){Pe.map.checkCollision(t.sprite,w)?t.sprite.stopX():(t.actionIndex--,t.sprite.forward())},g:t.follow,r:t.away,h:function(){t.sprite.fall=function(){}},x:function(){},u:function(){t.sprite.y-=3},n:function(){t.sprite.y+=3},k:function(){t.actions.u(),t.sprite.forward()},m:function(){t.actions.n(),t.sprite.forward()}},t.nextAction=function(){var e=t.actionpipe[t.actionIndex];t.actions[e](),++t.actionIndex>=t.actionpipe.length&&(t.actionIndex=0)},t.update=function(){t.nextAction(),--t.coldown<0&&(t.coldown=0)},t.triggers=[function(){console.log("do something after dead")}],t.trigger=function(e){t.triggers[t.triggerType]()},t.hit=function(e,i,n){var o=getTotalDamage(e,t.skills.current,i);t.sprite.x+=(n?1:-1)*o*(10-t.damage),t.sprite.hit(o)&&!t.del&&(t.del=1,t.trigger("death"))}},ue=function(e){var t=this;t.loaded=!1;var i=new Image;i.src=e,t.map=[],t.puzzle=void 0,i.onload=function(){u.drawImage(i,0,0),t.width=i.width,t.height=i.height;for(var e=u.getImageData(0,0,i.width,i.height),n=e.data,o=-1,r=0,a=n.length;a>r;r+=4){r%(4*i.width)==0&&(t.map.push([]),o++),t.map[o].push(Math.floor(n[r]/64));var f=Math.floor(n[r+1]/10),c=Math.floor(n[r+2]/10);t.processInfo(f,c,t.map[o].length-1,o)}t.loaded=!0},t.processInfo=function(e,i,n,o){if(1==e){var r=ke[i].current;t.puzzle=new ve(r,i),t.puzzle.x=n,t.puzzle.y=o}},t.draw=function(e,i,n,o){if(this.map&&this.map[0]){e=e+n>=t.width?t.width-n:e,i=i+o>=t.height?t.height-o:i;for(var r=0;o>r;r++)for(var a=0;n>a;a++){var f=this.map[r+i][a+e];3!=f&&(u.fillStyle=g["MNO"[f]],u.fillRect(a*m,r*m,m,m))}t.puzzle&&t.puzzle.draw(e-t.puzzle.x,i-t.puzzle.y)}},t.checkCollision=function(e,i){var n=e.getLastLines(i),o=e.x,r=e.y+1,a=r+15>t.height-1?t.height-1:r+15;a=i>a?i:a;for(var f=n.length-1;f>=0;f--){for(var c=0,p=0;15>p;p++){var l=t.map[a-f][o+p];c+=0==l?1<<15-p:0}if((c&n[f])>0)return a-f}return-1},t.enterPos=function(e){return{r:{i:0,j:t.height/2},l:{i:t.width,j:t.height/2},u:{i:t.height/2,j:t.height-15},d:{i:t.height/2,j:0}}[e]}},me=function(){var e=this;e.map=new ue("assets/A.png"),e.cont=0,e.coords={x:0,y:0},e.enter=!1,e.readInputs=function(){var t={x:0,y:0,landed:e.map.checkCollision(Ae,w)};return i("37")?(t.x=-Ae.speed,Ae.setDirection(1),0==Ae.jumpPower&&"jump4"!=Ae.currentAnimation&&Ae.setAnimation("run")):i("39")&&(t.x=Ae.speed,Ae.setDirection(0),0==Ae.jumpPower&&"jump4"!=Ae.currentAnimation&&Ae.setAnimation("run")),i("38")&&-1!=t.landed&&(Ae.collides=!1,Ae.acelerationY=k,Ae.jumpPower=0,Ae.lockJump=!1,Ae.setAnimation("jump1")),i("38")&&Ae.acelerationY<0&&!Ae.lockJump&&(Ae.jumpPower+=1,Ae.acelerationY=k,Ae.lockJump=Ae.jumpPower>y),i("13")?e.enter=!0:e.enter&&(t.enter=!0,e.enter=!1),t},e.update=function(t){return t.enter&&e.map.puzzle&&(ze.puzzle=e.map.puzzle,ze.x=e.coords.x,ze.y=e.coords.y,Ae.setAnimation("idle2"),p(11,30),f(ze)),Ae.x<=-10&&n("l")?e.changeMap("l"):Ae.x>=e.map.width-5&&n("r")?e.changeMap("r"):Ae.y<=-15&&n("u")?e.changeMap("u"):Ae.y>=e.map.height-1&&n("d")?e.changeMap("d"):(0==t.x&&0==Ae.jumpPower&&"jump4"!=Ae.currentAnimation&&"jump3"!=Ae.currentAnimation&&Ae.setAnimation(Me),Ae.fall(),Ae.move(t.x),xe.animate(),Ae.animate(),e.cont++,400==e.cont&&(Me="idle"+(1+Math.round(Math.random())),Ae.onEndAnimationLoop=function(){Me="idle0",Ae.setAnimation(Me),Ae.onEndAnimationLoop=void 0}),e.cont>1e3&&(e.cont=0),Ae.acelerationY<0&&Ae.acelerationY>-.1&&Ae.setAnimation("jump2"),-1!=t.landed&&Ae.acelerationY>0&&(t.landed-Ae.y!=16&&Ae.speedY>.3&&(Ae.setAnimation("jump4"),Ae.onEndAnimationLoop=function(){Me="idle0",e.cont=0,Ae.setAnimation(Me),Ae.onEndAnimationLoop=void 0}),Ae.acelerationY=0,Ae.setPos(Ae.x,t.landed-16),Ae.jumpPower=0),Ae.speedY>0&&Ae.acelerationY>0&&0==Ae.jumpPower&&Ae.setAnimation("jump3"),e.coords.x=Ae.x-24,e.coords.y=Ae.y-24,e.coords.x<0?e.coords.x=0:e.coords.x>e.map.width-h&&(e.coords.x=e.map.width-h),e.coords.y<0?e.coords.y=0:e.coords.y>e.map.height-h&&(e.coords.y=e.map.height-h),je.fall(),je.update(),void je.sprite.animate())},e.draw=function(){u.fillStyle=g.D,u.fillRect(0,0,m*h,m*h),e.map.draw(Math.floor(e.coords.x),Math.floor(e.coords.y),h,h),je.sprite.draw(e.coords.x*m,e.coords.y*m)},e.changeMap=function(t){var i=o(t);e.map=new ue("assets/"+i.name+".png");e.map.enterPos(t);Ae.setPos(32,32)},e.isReady=function(){return e.map.loaded}},he={1:{draw:function(e,t,i){u.fillRect(e+i*m,t,m,i*m)}},2:{draw:function(e,t,i){u.fillRect(e+i*m,t+i*m,i*m,m)}},4:{draw:function(e,t,i){u.fillRect(e+i*m,t+i*m,m,i*m)}},8:{draw:function(e,t,i){u.fillRect(e,t+i*m,i*m,m)}}},ve=function(e,t){var i=this;i.pieces=[],i.loaded=!1,i.enter=15,i.exit=7,i.proportion=8,i["void"]={i:0,j:0},i.id=t,i.decode=function(e){var t=!1;i.enter=parseInt(e[0],16),i.exit=parseInt(e[1],16);for(var n=0;4>n;n++){i.pieces.push([]);for(var o=0;4>o;o++){var r=parseInt(e[4*n+o+2],16);i.pieces[n][o]=r,0!=r||t||(i.pieces[n][o]=-1,i["void"].i=o,i["void"].j=n,t=!0)}}i.loaded=!0},i.encode=function(){var e="";e+=i.enter.toString("16"),e+=i.exit.toString("16"),i.pieces[i["void"].j][i["void"].i]=0;for(var t=0;4>t;t++)for(var n=0;4>n;n++)e+=i.pieces[t][n].toString("16");return i.pieces[i["void"].j][i["void"].i]=-1,e},i.exchange=function(e,t){var n=i.pieces[t][e];i.pieces[t][e]=-1,i.pieces[i["void"].j][i["void"].i]=n},i.toLeft=function(){0!=i["void"].i&&(i.exchange(i["void"].i-1,i["void"].j),i["void"].i-=1)},i.toRight=function(){3!=i["void"].i&&(i.exchange(i["void"].i+1,i["void"].j),i["void"].i+=1)},i.toTop=function(){0!=i["void"].j&&(i.exchange(i["void"].i,i["void"].j-1),i["void"].j-=1)},i.toBottom=function(){3!=i["void"].j&&(i.exchange(i["void"].i,i["void"].j+1),i["void"].j+=1)},i.draw=function(e,t){e=e||0,t=t||0,u.fillStyle=g.P,u.fillRect(-e*m,-t*m,32*m,32*m);for(var n=0;4>n;n++)for(var o=0;4>o;o++){var r=i.pieces[n][o],a=o*i.proportion*m-e*m,f=n*i.proportion*m-t*m,c=i.proportion/2;u.fillStyle=g.N,u.fillRect(a,f,i.proportion*m,m),u.fillRect(a,f+i.proportion*m,i.proportion*m,m),u.fillRect(a,f,m,i.proportion*m),u.fillRect(a+i.proportion*m,f,m,i.proportion*m),0>=r?(0==r&&(u.fillStyle=g.P),u.fillRect(a+m,f+m,(i.proportion-1)*m,(i.proportion-1)*m)):(u.fillStyle=g.M,(1&r)>0&&he[1].draw(a,f,c),(2&r)>0&&he[2].draw(a,f,c),(4&r)>0&&he[4].draw(a,f,c),(8&r)>0&&he[8].draw(a,f,c))}},i.decode(e)},ge=function(){var e=this;e.puzzle=new ve("F70101010101010101"),Ae.setAnimation("idle2"),e.up=!1,e.down=!1,e.left=!1,e.right=!1,e.readInputs=function(){var t={up:!1,down:!1,left:!1,right:!1,enter:!1};return i("37")?e.left=!0:e.left&&(t.left=!0,e.left=!1),i("39")?e.right=!0:e.right&&(t.right=!0,e.right=!1),i("38")?e.up=!0:e.up&&(t.up=!0,e.up=!1),i("40")?e.down=!0:e.down&&(t.down=!0,e.down=!1),i("13")?e.enter=!0:e.enter&&(t.enter=!0,e.enter=!1),t},e.update=function(t){t.enter&&(ke[e.puzzle.id].current=e.puzzle.encode(),a("A",ke[e.puzzle.id].current),p(11,30),f(Pe)),t.right&&e.puzzle.toRight(),t.left&&e.puzzle.toLeft(),t.up&&e.puzzle.toTop(),t.down&&e.puzzle.toBottom()},e.draw=function(){e.puzzle.draw(e.x-e.puzzle.x,e.y-e.puzzle.y)},e.isReady=function(){return e.puzzle.loaded}},ke={2:{original:"F7AC2C69053C6D0393",current:"F7AC2C69053C6D0393"}},ye={0:{r:"1"},1:{l:"0",u:"A"},2:{l:"3",r:"4",d:"1"},3:{r:"2",l:"A",u:"B"},4:{l:"2",r:"C",d:"D"},A:{l:"A",r:"A",p:"2",code:"A"},AZ:{l:"p",code:"AZ"},B:{t:"p",d:"3"},C:{t:"p",l:"3"},D:{t:"p",u:"3"}},we=ye.A;a("A",ke[2].current);var Ae=new de([{key:N,layer:"M"},{key:O,layer:"N"},{key:F,layer:"O"},{key:Y,layer:"P"}]);Ae.setAnimation("idle0"),Ae.setPixelSize(m),Ae.setPos(32,32);var je=new se({nameCode:"zombie_attack",hp:10,x:10,y:10});je.sprite.setAnimation("zombie_walk");var xe=new de([{key:T,layer:"M"},{key:W,layer:"N"},{key:V,layer:"O"}]);xe.setAnimation("power"),xe.setPixelSize(m),xe.setPos(32,32);var Me="idle0",Pe=new me,ze=new ge,Ne=Pe,Oe=["exp2","gboy2","gboy3","exp1","gboy"],Fe=0;s.addEventListener("click",function(t){Fe+=1,4==Fe&&(Fe=0),e(v[Oe[Fe]],!1),t.preventDefault()});var Ye=0,be=20,Ie=30;ra(l)}();